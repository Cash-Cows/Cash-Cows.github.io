{"version":3,"file":"src_app_royalty-browser_royalty-browser_module_ts.js","mappings":"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","sources":["./src/app/royalty-browser/royalty-browser-routing.module.ts","./src/app/royalty-browser/royalty-browser.module.ts","./src/app/royalty-browser/royalty-browser.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RoyaltyBrowserPage } from './royalty-browser.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RoyaltyBrowserPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RoyaltyBrowserPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RoyaltyBrowserPageRoutingModule } from './royalty-browser-routing.module';\n\nimport { RoyaltyBrowserPage } from './royalty-browser.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RoyaltyBrowserPageRoutingModule\n  ],\n  declarations: [RoyaltyBrowserPage]\n})\nexport class RoyaltyBrowserPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AlertController, LoadingController, PopoverController } from '@ionic/angular';\nimport { environment } from 'src/environments/environment';\nimport { ChainModel } from '../models/chain.model';\nimport { ConnectwalletService } from '../utils/connectwallet.service';\nimport { ToastMessageService } from '../utils/toast-message.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n@Component({\n  selector: 'app-royalty-browser',\n  templateUrl: './royalty-browser.page.html',\n  styleUrls: ['./royalty-browser.page.scss'],\n})\nexport class RoyaltyBrowserPage implements OnInit {\n  myUserAddress:any;totalRoyalties=0;isLoaded=false;\n  chainModel:ChainModel={};\n  config= environment.configchain;\n\n  constructor(\n    private http:HttpClient,\n    private connectWallet:ConnectwalletService,\n    private loadingController:LoadingController,\n    private toast:ToastMessageService,\n    private popoverController: PopoverController,\n    private alertController:AlertController\n  ) { }\n\n\n  ngOnInit(): void {\n    if(!environment.production){\n      this.onConnectWallet();\n    }\n  }\n\n\n  async onConnectWallet(){\n    await this.connectWallet.connect();\n    await this.onRefreshChainData();\n  }\n\n  onRefreshChainData() {\n    \n    return new Promise<any>(async resolve=>{ \n      this.isLoaded = false;\n      this.myUserAddress = this.connectWallet.userAddress;  \n      \n      const loading = await this.loadingController.create({ message: \"Please wait ....\"  });\n      // await loading.present();  \n      const ownerTokens =  await this.connectWallet.contract.methods.ownerTokens(this.myUserAddress).call(); \n      this.chainModel.tokenData = [];\n      this.chainModel.ownerTokens = [];\n\n      for(let i = 0 ; i < ownerTokens.length ; i ++){\n        this.chainModel.ownerTokens.push(parseInt(ownerTokens[i]));\n\n        const tokenID = this.chainModel.ownerTokens[i];\n        const tokenURI = await this.connectWallet.contract.methods.tokenURI(tokenID).call();  \n\n        let tokenData = await new Promise<any>((resolve,reject)=>{    \n          if(!environment.production){\n            const headers = new HttpHeaders() \n            .set('content-type', 'application/json') ; \n            this.http.get(tokenURI,\n            { headers: headers }).subscribe(async (res:any)=>{   \n              resolve(res);\n            })  \n          }else{ \n            const headers = new HttpHeaders() \n            .set('content-type', 'application/json') ; \n            this.http.get(`https://opensea.mypinata.cloud/ipfs/${tokenURI.split('ipfs/')[1]}`,\n            { headers: headers }).subscribe(async (res:any)=>{   \n              res.image = `https://opensea.mypinata.cloud/ipfs/${res.image .split('ipfs/')[1]}`;\n              resolve(res);\n            })  \n          } \n        });\n \n        let royalty = parseInt(await  this.connectWallet.contractRoyalty.methods.releaseable(tokenID).call());\n        royalty = royalty/Math.pow(10,18);\n        tokenData = Object.assign(tokenData,{royalty});\n        this.totalRoyalties += royalty;\n        this.chainModel.tokenData.push(tokenData);\n      }\n\n\n      console.log(\"Chain Model\", this.chainModel);   \n\n      this.isLoaded = true;\n      await loading.dismiss(); \n      resolve({});\n    });\n  }\n\n\n  claimRoyalties(){\n    return new Promise<any>(async (resolve)=>{\n        \n      const loading = await this.loadingController.create({ message: \"Please wait ....\"  });\n      await loading.present();  \n      let gasLimit = this.config.GAS_LIMIT;\n\n      console.log(\"this.chainModel.ownerTokens\",this.chainModel.ownerTokens,JSON.stringify(this.chainModel.ownerTokens),this.chainModel.ownerTokens.join(\",\"));\n      await this.connectWallet.contractRoyalty.methods.releaseBatch(this.chainModel.ownerTokens)\n      .send({ \n        gasLimit: gasLimit,\n        to: this.config.CONTRACT_ADDRESS_ROYALTY,\n        from: this.myUserAddress  \n      });\n \n      \n      await loading.dismiss(); \n      \n      this.toast.presentToast(\"Claimed Successfully!\");\n      this.onRefreshChainData();\n      resolve({});\n    })\n  }\n  \n  updateChainHoldNft(){\n\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}